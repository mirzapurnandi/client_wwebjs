import{_ as k,m as v,d as D,e as h,j as T,o as n,c as i,a as t,n as r,k as w,g as c,l as S,p as b,F as d,h as u,f as _,t as l,i as g}from"./index-c8454fb3.js";const C={name:"DataAdminTransaction",created(){this.CLEAR_ERRORS(),this.getRoutingLists(1)},data(){return{selectedSender:"",form:{user_id:"",sender_name:"",page:1,limit:50,status_code:""}}},computed:{...v(["errors","processing"]),...v("transaction",["dataTransactions","dataPagination","detailTransaction","dataSender"]),...D("routing",["dataRoutings"])},methods:{...h("transaction",["getDataTransaction","getDataTransactionDetail","trySendTransactionDetail"]),...h("routing",["getRoutingLists"]),...T(["CLEAR_ERRORS"]),async onSelectSender(){this.selectedSender?(this.form.user_id=await this.selectedSender.user_id,this.form.sender_name=await this.selectedSender.sender_name):(this.form.user_id="",this.form.sender_name="")},async getDataTransactionPagination(e){this.form.page=await e,await this.getDataTransaction(this.form)},onFileChange(e){this.form.file=e.target.files[0]},filtering(){this.getDataTransaction(this.form)},async viewDetail(e,a){await this.getDataTransactionDetail({id_transaction:e,user_id:a}).then(m=>{console.log(m)})},async trySend(e){confirm("ðŸš¨ Apakah Anda yakin ingin melakukan Pengiriman ulang?")&&await this.trySendTransactionDetail({id_transaction:e}).then(a=>{this.$swal({position:"top-end",icon:"success",title:a.message,showConfirmButton:!1,timer:2e3})}).catch(a=>{this.$swal({icon:"error",title:"Oops...",text:a.data.message?a.data.message:"Something went wrong!"})})}}},P={class:"card card-info"},R={key:0,class:"overlay dark"},A={class:"form-group row"},L={class:"col-sm-10"},E=["value"],F={class:"form-group row"},M={class:"col-sm-10"},V={class:"card card-success"},N={key:0,class:"overlay dark"},B={class:"table table-hover text-nowrap table-striped"},O=["innerHTML"],j={class:"text-right"},z=["onClick"],H=["onClick"],I={key:0},U={class:"card-footer clearfix"},x={class:"pagination pagination-sm m-0 float-right"},G=["onClick"];function W(e,a,m,$,p,o){return n(),i(d,null,[t("div",P,[a[12]||(a[12]=t("div",{class:"card-header"},[t("h3",{class:"card-title"},"Filter Data Transaction")],-1)),t("div",{class:r(["card-body",{"overlay-wrapper":this.processing}])},[t("form",{class:"form-horizontal",onSubmit:a[3]||(a[3]=w((...s)=>o.filtering&&o.filtering(...s),["prevent"])),method:"POST"},[this.processing?(n(),i("div",R,a[6]||(a[6]=[t("i",{class:"fas fa-3x fa-sync-alt fa-spin"},null,-1)]))):c("",!0),t("div",A,[a[8]||(a[8]=t("label",{for:"name",class:"col-sm-2 col-form-label"},"Sender Name",-1)),t("div",L,[S(t("select",{id:"sender","onUpdate:modelValue":a[0]||(a[0]=s=>p.selectedSender=s),class:"form-control",onChange:a[1]||(a[1]=(...s)=>o.onSelectSender&&o.onSelectSender(...s))},[a[7]||(a[7]=t("option",{value:""},"-- Pilih Sender --",-1)),(n(!0),i(d,null,u(e.dataRoutings,s=>(n(),i("option",{key:s.id,value:s},l(s.sender_name)+" - "+l(s.user_name),9,E))),128))],544),[[b,p.selectedSender]])])]),t("div",F,[a[10]||(a[10]=t("label",{for:"name",class:"col-sm-2 col-form-label"},"Status",-1)),t("div",M,[S(t("select",{id:"status_code","onUpdate:modelValue":a[2]||(a[2]=s=>this.form.status_code=s),class:"form-control"},a[9]||(a[9]=[_('<option value="">-- Pilih Status --</option><option value="0">Waiting</option><option value="1">Sent</option><option value="2">Failed</option><option value="3">Delivered</option><option value="4">READ</option>',6)]),512),[[b,this.form.status_code]])])]),a[11]||(a[11]=t("div",{class:"form-group row"},[t("label",{for:"name",class:"col-sm-2 col-form-label"}),t("div",{class:"col-sm-10"},[t("button",{type:"submit",class:"btn btn-warning"},"Filter")])],-1))],32)],2),a[13]||(a[13]=t("div",{class:"card-footer"},[t("button",{type:"button",class:"btn btn-info"},"Re-Send Message")],-1))]),t("div",V,[a[20]||(a[20]=t("div",{class:"card-header"},[t("h3",{class:"card-title"},"Data Transaction")],-1)),t("div",{class:r(["card-body table-responsive p-0",{"overlay-wrapper":this.processing}])},[this.processing?(n(),i("div",N,a[14]||(a[14]=[t("i",{class:"fas fa-3x fa-sync-alt fa-spin"},null,-1)]))):c("",!0),t("table",B,[a[19]||(a[19]=t("thead",null,[t("tr",null,[t("th",null,"ID Transaction"),t("th",null,"Destination"),t("th",null,"Content"),t("th",null,"Status"),t("th")])],-1)),t("tbody",null,[(n(!0),i(d,null,u(e.dataTransactions,(s,f)=>(n(),i("tr",{key:f,class:r(`provider_${s.id}`)},[t("td",null,l(s.id_transaction),1),t("td",null,l(s.destination),1),t("td",null,[t("span",{innerHTML:s.content},null,8,O)]),t("td",null,l(s.status_code),1),t("td",j,[t("a",{class:"btn btn-info btn-sm",href:"javascript:;",onClick:y=>o.viewDetail(s.id_transaction,s.user_id)},a[15]||(a[15]=[t("i",{class:"fas fa-eye"},null,-1),g(" Info ")]),8,z),a[17]||(a[17]=g("Â  ")),t("a",{class:"btn btn-success btn-sm",href:"javascript:;",onClick:y=>o.trySend(s.id_transaction)},a[16]||(a[16]=[t("i",{class:"fas fa-repeat"},null,-1),g(" Repeat ")]),8,H)])],2))),128)),!e.dataTransactions||e.dataTransactions.length===0?(n(),i("tr",I,a[18]||(a[18]=[t("td",{colspan:"5",class:"text-center text-muted"},".:: Data kosong ::.",-1)]))):c("",!0)])])],2),t("div",U,[t("ul",x,[t("li",{class:r(["page-item",{disabled:e.dataPagination.current_page===1}])},[t("a",{class:"page-link",href:"#",onClick:a[4]||(a[4]=s=>o.getDataTransactionPagination(e.dataPagination.current_page-1))}," Â« ")],2),(n(!0),i(d,null,u(e.dataPagination.last_page,s=>(n(),i("li",{key:s,class:r(["page-item",{active:s===e.dataPagination.current_page}])},[t("a",{class:"page-link",href:"#",onClick:f=>o.getDataTransactionPagination(s)},l(s),9,G)],2))),128)),t("li",{class:r(["page-item",{disabled:e.dataPagination.current_page===e.dataPagination.last_page}])},[t("a",{class:"page-link",href:"#",onClick:a[5]||(a[5]=s=>o.getDataTransactionPagination(e.dataPagination.current_page+1))},"Â»")],2)])])])],64)}const J=k(C,[["render",W]]);export{J as default};
