var R=Object.defineProperty,A=Object.defineProperties;var L=Object.getOwnPropertyDescriptors;var k=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var D=(s,t,n)=>t in s?R(s,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[t]=n,d=(s,t)=>{for(var n in t||(t={}))E.call(t,n)&&D(s,n,t[n]);if(k)for(var n of k(t))F.call(t,n)&&D(s,n,t[n]);return s},T=(s,t)=>A(s,L(t));var p=(s,t,n)=>new Promise((y,m)=>{var i=l=>{try{c(n.next(l))}catch(v){m(v)}},e=l=>{try{c(n.throw(l))}catch(v){m(v)}},c=l=>l.done?y(l.value):Promise.resolve(l.value).then(i,e);c((n=n.apply(s,t)).next())});import{_ as M,m as w,d as V,e as _,j as N,o,c as r,a,n as u,k as B,g as h,l as C,p as P,F as f,h as S,f as O,t as g,i as b}from"./index-2cc1657b.js";const j={name:"DataAdminTransaction",created(){this.CLEAR_ERRORS(),this.getRoutingLists(1)},data(){return{selectedSender:"",form:{user_id:"",sender_name:"",page:1,limit:50,status_code:""}}},computed:d(d(d({},w(["errors","processing"])),w("transaction",["dataTransactions","dataPagination","detailTransaction","dataSender"])),V("routing",["dataRoutings"])),methods:T(d(d(d({},_("transaction",["getDataTransaction","getDataTransactionDetail","trySendTransactionDetail"])),_("routing",["getRoutingLists"])),N(["CLEAR_ERRORS"])),{onSelectSender(){return p(this,null,function*(){this.selectedSender?(this.form.user_id=yield this.selectedSender.user_id,this.form.sender_name=yield this.selectedSender.sender_name):(this.form.user_id="",this.form.sender_name="")})},getDataTransactionPagination(s){return p(this,null,function*(){this.form.page=yield s,yield this.getDataTransaction(this.form)})},onFileChange(s){this.form.file=s.target.files[0]},filtering(){this.getDataTransaction(this.form)},viewDetail(s,t){return p(this,null,function*(){yield this.getDataTransactionDetail({id_transaction:s,user_id:t}).then(n=>{console.log(n)})})},trySend(s){return p(this,null,function*(){confirm("ðŸš¨ Apakah Anda yakin ingin melakukan Pengiriman ulang?")&&(yield this.trySendTransactionDetail({id_transaction:s}).then(t=>{this.$swal({position:"top-end",icon:"success",title:t.message,showConfirmButton:!1,timer:2e3})}).catch(t=>{this.$swal({icon:"error",title:"Oops...",text:t.data.message?t.data.message:"Something went wrong!"})}))})}})},z={class:"card card-info"},H={key:0,class:"overlay dark"},I={class:"form-group row"},U={class:"col-sm-10"},x=["value"],G={class:"form-group row"},W={class:"col-sm-10"},$={class:"card card-success"},q={key:0,class:"overlay dark"},J={class:"table table-hover text-nowrap table-striped"},K=["innerHTML"],Q={class:"text-right"},X=["onClick"],Y=["onClick"],Z={key:0},tt={class:"card-footer clearfix"},at={class:"pagination pagination-sm m-0 float-right"},st=["onClick"];function et(s,t,n,y,m,i){return o(),r(f,null,[a("div",z,[t[12]||(t[12]=a("div",{class:"card-header"},[a("h3",{class:"card-title"},"Filter Data Transaction")],-1)),a("div",{class:u(["card-body",{"overlay-wrapper":this.processing}])},[a("form",{class:"form-horizontal",onSubmit:t[3]||(t[3]=B((...e)=>i.filtering&&i.filtering(...e),["prevent"])),method:"POST"},[this.processing?(o(),r("div",H,t[6]||(t[6]=[a("i",{class:"fas fa-3x fa-sync-alt fa-spin"},null,-1)]))):h("",!0),a("div",I,[t[8]||(t[8]=a("label",{for:"name",class:"col-sm-2 col-form-label"},"Sender Name",-1)),a("div",U,[C(a("select",{id:"sender","onUpdate:modelValue":t[0]||(t[0]=e=>m.selectedSender=e),class:"form-control",onChange:t[1]||(t[1]=(...e)=>i.onSelectSender&&i.onSelectSender(...e))},[t[7]||(t[7]=a("option",{value:""},"-- Pilih Sender --",-1)),(o(!0),r(f,null,S(s.dataRoutings,e=>(o(),r("option",{key:e.id,value:e},g(e.sender_name)+" - "+g(e.user_name),9,x))),128))],544),[[P,m.selectedSender]])])]),a("div",G,[t[10]||(t[10]=a("label",{for:"name",class:"col-sm-2 col-form-label"},"Status",-1)),a("div",W,[C(a("select",{id:"status_code","onUpdate:modelValue":t[2]||(t[2]=e=>this.form.status_code=e),class:"form-control"},t[9]||(t[9]=[O('<option value="">-- Pilih Status --</option><option value="0">Waiting</option><option value="1">Sent</option><option value="2">Failed</option><option value="3">Delivered</option><option value="4">READ</option>',6)]),512),[[P,this.form.status_code]])])]),t[11]||(t[11]=a("div",{class:"form-group row"},[a("label",{for:"name",class:"col-sm-2 col-form-label"}),a("div",{class:"col-sm-10"},[a("button",{type:"submit",class:"btn btn-warning"},"Filter")])],-1))],32)],2),t[13]||(t[13]=a("div",{class:"card-footer"},[a("button",{type:"button",class:"btn btn-info"},"Re-Send Message")],-1))]),a("div",$,[t[20]||(t[20]=a("div",{class:"card-header"},[a("h3",{class:"card-title"},"Data Transaction")],-1)),a("div",{class:u(["card-body table-responsive p-0",{"overlay-wrapper":this.processing}])},[this.processing?(o(),r("div",q,t[14]||(t[14]=[a("i",{class:"fas fa-3x fa-sync-alt fa-spin"},null,-1)]))):h("",!0),a("table",J,[t[19]||(t[19]=a("thead",null,[a("tr",null,[a("th",null,"ID Transaction"),a("th",null,"Destination"),a("th",null,"Content"),a("th",null,"Status"),a("th")])],-1)),a("tbody",null,[(o(!0),r(f,null,S(s.dataTransactions,(e,c)=>(o(),r("tr",{key:c,class:u(`provider_${e.id}`)},[a("td",null,g(e.id_transaction),1),a("td",null,g(e.destination),1),a("td",null,[a("span",{innerHTML:e.content},null,8,K)]),a("td",null,g(e.status_code),1),a("td",Q,[a("a",{class:"btn btn-info btn-sm",href:"javascript:;",onClick:l=>i.viewDetail(e.id_transaction,e.user_id)},t[15]||(t[15]=[a("i",{class:"fas fa-eye"},null,-1),b(" Info ")]),8,X),t[17]||(t[17]=b("Â  ")),a("a",{class:"btn btn-success btn-sm",href:"javascript:;",onClick:l=>i.trySend(e.id_transaction)},t[16]||(t[16]=[a("i",{class:"fas fa-repeat"},null,-1),b(" Repeat ")]),8,Y)])],2))),128)),!s.dataTransactions||s.dataTransactions.length===0?(o(),r("tr",Z,t[18]||(t[18]=[a("td",{colspan:"5",class:"text-center text-muted"},".:: Data kosong ::.",-1)]))):h("",!0)])])],2),a("div",tt,[a("ul",at,[a("li",{class:u(["page-item",{disabled:s.dataPagination.current_page===1}])},[a("a",{class:"page-link",href:"#",onClick:t[4]||(t[4]=e=>i.getDataTransactionPagination(s.dataPagination.current_page-1))}," Â« ")],2),(o(!0),r(f,null,S(s.dataPagination.last_page,e=>(o(),r("li",{key:e,class:u(["page-item",{active:e===s.dataPagination.current_page}])},[a("a",{class:"page-link",href:"#",onClick:c=>i.getDataTransactionPagination(e)},g(e),9,st)],2))),128)),a("li",{class:u(["page-item",{disabled:s.dataPagination.current_page===s.dataPagination.last_page}])},[a("a",{class:"page-link",href:"#",onClick:t[5]||(t[5]=e=>i.getDataTransactionPagination(s.dataPagination.current_page+1))},"Â»")],2)])])])],64)}const ot=M(j,[["render",et]]);export{ot as default};
