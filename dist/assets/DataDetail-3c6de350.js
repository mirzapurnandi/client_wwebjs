var S=Object.defineProperty,C=Object.defineProperties;var T=Object.getOwnPropertyDescriptors;var E=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var _=(i,e,n)=>e in i?S(i,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[e]=n,g=(i,e)=>{for(var n in e||(e={}))V.call(e,n)&&_(i,n,e[n]);if(E)for(var n of E(e))M.call(e,n)&&_(i,n,e[n]);return i},k=(i,e)=>C(i,T(e));var v=(i,e,n)=>new Promise((R,p)=>{var a=s=>{try{m(n.next(s))}catch(l){p(l)}},c=s=>{try{m(n.throw(s))}catch(l){p(l)}},m=s=>s.done?R(s.value):Promise.resolve(s.value).then(a,c);m((n=n.apply(i,e)).next())});import{_ as O,m as w,d as A,e as L,j as q,r as B,o as d,c as u,a as t,i as o,t as r,k as f,f as Q,n as b,g as h,F as D,h as y,l as P,p as I,b as N,w as H}from"./index-836c9345.js";import{M as F}from"./ModalProviderDetail-69849056.js";const G={name:"DataAdminProviderDetail",components:{ModalProviderDetail:F},data(){return{idInstanceActive:null,form:{routing_id:this.$route.params.id,providerdetail_id:"",is_backup:!1},selectedProvider:"",providerDataDetails:[]}},created(){this.getRoutingDetails({id:this.$route.params.id,page:this.$route.query.page||1,user_id:this.$route.query.user_id})},computed:g(g(g(g({},w(["processing"])),w("provider",["providerDetails"])),A("provider",["dataProviders"])),A("routing",["routings","dataRoutingDetails","pagination"])),methods:k(g(g(g({},L("routing",["getRoutingDetails","addEngine"])),L("provider",["getProviderLists","getDataProviderDetails","getStatusProviderDetails","refreshProviderDetails","getQRProviderDetails","redeployProviderDetails","getScreenshotProviderDetails"])),q("provider",["CLEAR_PROVIDER_DETAIL"])),{openModalCreateEngine(){return v(this,null,function*(){try{yield this.getProviderLists(),$("#modal-add-engine").modal("show")}catch(i){console.error("Gagal ambil detail:",i)}})},loadProviderDetails(){return v(this,null,function*(){var e;if(!this.selectedProvider){this.providerDataDetails=[],this.form.providerdetail_id="";return}const i=yield this.getDataProviderDetails(this.selectedProvider);this.providerDataDetails=(e=i==null?void 0:i.result)==null?void 0:e.result})},submitEngine(){return v(this,null,function*(){try{yield this.addEngine(this.form),$("#modal-add-engine").modal("hide"),yield this.$swal({position:"top-end",icon:"success",title:"Engine berhasil ditambahkan",showConfirmButton:!1,timer:2e3}),yield this.getRoutingDetails({id:this.$route.params.id,page:this.$route.query.page||1,user_id:this.$route.query.user_id})}catch(i){this.$swal({icon:"error",title:"Oops...",text:i.data.message?i.data.message:"Something went wrong!"})}})},openModal(i){return v(this,null,function*(){this.idInstanceActive=i;try{this.CLEAR_PROVIDER_DETAIL(),$("#modal-xl").modal("show"),yield this.getStatusProviderDetails({id_instance:i})}catch(e){console.error("Gagal ambil detail:",e)}})},refreshInstance(){return v(this,null,function*(){this.CLEAR_PROVIDER_DETAIL(),yield this.refreshProviderDetails({id_instance:this.idInstanceActive})})},getQRInstance(){this.CLEAR_PROVIDER_DETAIL(),this.getQRProviderDetails({id_instance:this.idInstanceActive}).catch(i=>{console.log(i),this.$swal({icon:"error",title:"Oops...",text:i.data.message?i.data.message:"Something went wrong!"})})},statusInstance(){return v(this,null,function*(){this.CLEAR_PROVIDER_DETAIL(),yield this.getStatusProviderDetails({id_instance:this.idInstanceActive}),yield this.getDataProviderDetails(this.providerId)})},redeployInstance(){return v(this,null,function*(){this.CLEAR_PROVIDER_DETAIL(),yield this.redeployProviderDetails({id_instance:this.idInstanceActive})})},getScreenshotInstance(){return v(this,null,function*(){this.CLEAR_PROVIDER_DETAIL(),yield this.getScreenshotProviderDetails({id_instance:this.idInstanceActive})})},refreshPage(){return v(this,null,function*(){this.CLEAR_PROVIDER_DETAIL(),yield this.getRoutingDetails({id:this.$route.params.id,page:this.$route.query.page||1,user_id:this.$route.query.user_id})})}})},U={class:"card"},j={class:"card-header"},x={class:"card-title"},z={key:0,class:"overlay dark"},K={class:"table table-hover text-nowrap table-striped"},Y={class:"text-right"},J=["onClick"],W={class:"modal fade",id:"modal-add-engine",tabindex:"-1","aria-hidden":"true"},X={class:"modal-dialog"},Z={class:"modal-content"},ee={class:"modal-body"},te={class:"mb-3"},se=["value"],ie={class:"mb-3"},ae=["disabled"],re=["value"],ne={class:"mb-3"},oe={class:"modal-footer"},le={key:0},de={key:1},ue={key:2},pe=["innerHTML"],ve={key:3},ge=["innerHTML"];function me(i,e,n,R,p,a){var m;const c=B("ModalProviderDetail");return d(),u(D,null,[t("div",U,[t("div",j,[t("h3",x,[e[8]||(e[8]=o("Data Routing: ")),t("b",null,r((m=i.routings)==null?void 0:m.sender_name),1)]),e[11]||(e[11]=o("   ")),t("button",{class:"btn bg-gradient-primary btn-sm",href:"javascript:;",onClick:e[0]||(e[0]=f(s=>a.openModalCreateEngine(),["prevent"]))},e[9]||(e[9]=[t("i",{class:"fas fa-plus"},null,-1),o(" Tambah Engine ")])),e[12]||(e[12]=o("   ")),t("button",{class:"btn bg-gradient-success btn-sm",onClick:e[1]||(e[1]=(...s)=>a.refreshPage&&a.refreshPage(...s))},e[10]||(e[10]=[t("i",{class:"fas fa-refresh"},null,-1),o(" Refresh ")])),e[13]||(e[13]=Q('<div class="card-tools"><div class="input-group input-group-sm" style="width:150px;"><input type="text" name="table_search" class="form-control float-right" placeholder="Search"><div class="input-group-append"><button type="submit" class="btn btn-default"><i class="fas fa-search"></i></button></div></div></div>',1))]),t("div",{class:b(["card-body table-responsive p-0",{"overlay-wrapper":this.processing}])},[this.processing?(d(),u("div",z,e[14]||(e[14]=[t("i",{class:"fas fa-3x fa-sync-alt fa-spin"},null,-1)]))):h("",!0),t("table",K,[e[19]||(e[19]=t("thead",null,[t("tr",null,[t("th",null,"No"),t("th",null,"Data Provider"),t("th",null,"Data Sender"),t("th",null,"Backup?"),t("th",null,"Status"),t("th")])],-1)),t("tbody",null,[(d(!0),u(D,null,y(i.dataRoutingDetails,(s,l)=>(d(),u("tr",{key:l,class:b(`provider_${s.id}`)},[t("td",null,r(l+1),1),t("td",null,[o(r(s.provider_id+": "+s.provider_name)+" ",1),e[15]||(e[15]=t("br",null,null,-1)),o(" "+r(s.provider_url),1)]),t("td",null,[t("span",{class:b(["badge",s.is_active?"badge-success":"badge-danger"])},r(s.label),3),o("  "+r(s.license_key)+" ",1),e[16]||(e[16]=t("br",null,null,-1)),o(" "+r(s.description)+" "+r(s.info_hp?" || "+s.info_hp:""),1)]),t("td",null,[t("span",{class:b(["badge",s.is_backup?"badge-success":"badge-danger"])},r(s.is_backup?"True":"False"),3)]),t("td",null,[t("span",{class:b(["badge",s.status?"badge-success":"badge-danger"])},r(s.status?"Active":"Disable"),3)]),e[18]||(e[18]=t("td",null,null,-1)),t("td",Y,[t("a",{class:"btn btn-primary btn-sm",href:"#",onClick:f(be=>a.openModal(s.license_key),["prevent"])},e[17]||(e[17]=[t("i",{class:"fas fa-folder"},null,-1),o(" Info ")]),8,J)])],2))),128))])])],2),t("div",W,[t("div",X,[t("div",Z,[e[27]||(e[27]=t("div",{class:"modal-header"},[t("h5",{class:"modal-title"},"Tambah Engine"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"})],-1)),t("div",ee,[t("form",{onSubmit:e[6]||(e[6]=f((...s)=>a.submitEngine&&a.submitEngine(...s),["prevent"]))},[t("div",te,[e[21]||(e[21]=t("label",{for:"provider",class:"form-label"},"Provider",-1)),P(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>p.selectedProvider=s),class:"form-control",onChange:e[3]||(e[3]=(...s)=>a.loadProviderDetails&&a.loadProviderDetails(...s))},[e[20]||(e[20]=t("option",{value:""},"-- Pilih Provider --",-1)),(d(!0),u(D,null,y(i.dataProviders,s=>(d(),u("option",{key:s.id,value:s.id},r(s.name),9,se))),128))],544),[[I,p.selectedProvider]])]),t("div",ie,[e[23]||(e[23]=t("label",{for:"providerdetail",class:"form-label"},"Provider Detail",-1)),P(t("select",{"onUpdate:modelValue":e[4]||(e[4]=s=>p.form.providerdetail_id=s),class:"form-control",disabled:!p.selectedProvider},[e[22]||(e[22]=t("option",{value:""},"-- Pilih Provider Detail --",-1)),(d(!0),u(D,null,y(p.providerDataDetails,s=>{var l;return d(),u("option",{key:s.id,value:s.id},r(s.description)+" ("+r((l=s.label)!=null?l:"-")+") ",9,re)}),128))],8,ae),[[I,p.form.providerdetail_id]])]),t("div",ne,[e[25]||(e[25]=t("label",{for:"isbackup",class:"form-label"},"Backup?",-1)),P(t("select",{"onUpdate:modelValue":e[5]||(e[5]=s=>p.form.is_backup=s),class:"form-control"},e[24]||(e[24]=[t("option",{value:!1},"Tidak",-1),t("option",{value:!0},"Ya",-1)]),512),[[I,p.form.is_backup]])])],32)]),t("div",oe,[e[26]||(e[26]=t("button",{class:"btn btn-secondary","data-bs-dismiss":"modal"},"Batal",-1)),t("button",{class:"btn btn-primary",onClick:e[7]||(e[7]=(...s)=>a.submitEngine&&a.submitEngine(...s))},"Simpan")])])])])]),N(c,{id:"modal-xl",title:"Detail Provider",instanceId:this.idInstanceActive,onRefresh:a.refreshInstance,onQr:a.getQRInstance,onStatus:a.statusInstance,onRedeploy:a.redeployInstance,onScreenshot:a.getScreenshotInstance},{body:H(()=>{var s,l;return[i.providerDetails?(d(),u("div",le,[t("p",null,[e[28]||(e[28]=t("strong",null,"ID:",-1)),o(" "+r(i.providerDetails.provider_detail.id),1)]),t("p",null,[e[29]||(e[29]=t("strong",null,"License Key:",-1)),o(" "+r(i.providerDetails.provider_detail.license_key),1)]),t("p",null,[e[30]||(e[30]=t("strong",null,"Label:",-1)),o(" "+r(i.providerDetails.provider_detail.label),1)]),t("p",null,[e[31]||(e[31]=t("strong",null,"Status:",-1)),t("span",{class:b(["badge",i.providerDetails.provider_detail.is_active?"badge-success":"badge-danger"])},r(i.providerDetails.provider_detail.is_active?"Active":"Disable"),3)])])):(d(),u("div",de,e[32]||(e[32]=[t("i",{class:"fas fa-spinner fa-spin"},null,-1),o(" Loading... ")]))),(s=i.providerDetails)!=null&&s.qr_instance?(d(),u("div",ue,[e[33]||(e[33]=t("p",null,[t("strong",null,"QR Instance:")],-1)),t("div",{innerHTML:i.providerDetails.qr_instance},null,8,pe)])):h("",!0),(l=i.providerDetails)!=null&&l.ss_instance?(d(),u("div",ve,[e[34]||(e[34]=t("p",null,[t("strong",null,"Screenshot Instance:")],-1)),t("div",{innerHTML:i.providerDetails.ss_instance},null,8,ge)])):h("",!0)]}),_:1},8,["instanceId","onRefresh","onQr","onStatus","onRedeploy","onScreenshot"])],64)}const he=O(G,[["render",me]]);export{he as default};
